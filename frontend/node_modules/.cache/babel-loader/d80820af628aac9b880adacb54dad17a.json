{"ast":null,"code":"var _jsxFileName = \"/home/megha/mernapp/frontend/src/components/Applicant/MyApplications.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport List from '@material-ui/core/List';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItem from '@material-ui/core/ListItem';\nimport Rating from '@material-ui/lab/Rating';\nimport PropTypes from \"prop-types\";\nimport Card from \"react-bootstrap/Card\";\nimport { connect } from \"react-redux\";\n\nclass MyApplications extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.state = {\n      userdetails: [],\n      applications: [],\n      rating: 0\n    };\n    this.giveRating = this.giveRating.bind(this); // this.renderIcon = this.renderIcon.bind(this);\n    // this.sortChange = this.sortChange.bind(this);\n  }\n\n  giveRating(e) {\n    this.setState({\n      rating: e.target.value\n    });\n  }\n\n  componentDidMount() {\n    const {\n      user\n    } = this.props.auth;\n    axios.get('http://localhost:4000/user/' + user.id).then(response => {\n      this.setState({\n        userdetails: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/job/get_jobs').then(response => {\n      this.setState({\n        jobs: response.data,\n        sortedJobs: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/application/get_applications').then(response => {\n      this.setState({\n        applications: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.errors) {\n      this.setState({\n        errors: nextProps.errors\n      });\n    }\n  }\n\n  rated(application) {\n    if (application.rating !== -1) return true;\n    return false;\n  }\n\n  getjob(jobId) {\n    let job = this.state.jobs.filter(item => item._id === jobId)[0];\n    return job;\n  }\n\n  rate(application) {\n    let job = this.getjob(application.jobId);\n    let nrate = job.numrate;\n    nrate = nrate + 1;\n    let nrating = 0;\n\n    if (job.rating === -1) {\n      nrating = this.state.rating;\n    } else {\n      nrating = (+job.rating * (+nrate - 1) + +this.state.rating) / +nrate;\n    }\n\n    const editJob = {\n      rating: nrating,\n      numrate: nrate\n    };\n    const editApplication = {\n      rating: this.state.rating\n    };\n    axios.put('http://localhost:4000/job/edit_job/' + job._id, editJob).then(response => {\n      console.log(editJob);\n      alert(\"Job rated successfully!\");\n    }).catch(function (error) {\n      console.log(error);\n      alert(\"Job could not be rated.\");\n    });\n    axios.put('http://localhost:4000/application/edit_application/' + application._id, editApplication).then(response => {\n      console.log(editApplication);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    window.location.reload();\n  }\n\n  render() {\n    const {\n      user\n    } = this.props.auth;\n    const userRole = this.state.userdetails.role;\n    let AppliedJobs;\n\n    if (userRole === \"applicant\") {\n      AppliedJobs = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 3,\n        lg: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(List, {\n        component: \"nav\",\n        \"aria-label\": \"mailbox folders\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        text: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"My Applications\"))))), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 12,\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Title\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Status\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Date of Joining\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Salary (per month)\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Recruiter\"))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.applications.filter(item => item.applicantId === user.id).map((application, ind) => React.createElement(TableRow, {\n        key: ind,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, application.title), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, application.status), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, application.doj ? application.doj.substring(0, 10) : \"\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, application.salary), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, application.recruiterName), !this.rated(application) && application.status === \"Accepted\" ? React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Rating, {\n        value: this.state.rating,\n        onChange: this.giveRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        title: \"Rate this job\",\n        \"aria-label\": \"apply\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.rate(application),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Rate\"))) : React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, application.rating !== -1 ? \"Rated\" : \"\"))))))))));\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        height: \"75vh\"\n      },\n      className: \"valign-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, AppliedJobs))))));\n  }\n\n}\n\nMyApplications.propTypes = {\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(MyApplications);","map":{"version":3,"sources":["/home/megha/mernapp/frontend/src/components/Applicant/MyApplications.js"],"names":["React","Component","axios","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","List","Tooltip","ListItem","Rating","PropTypes","Card","connect","MyApplications","constructor","props","onLogoutClick","e","preventDefault","logoutUser","onChange","setState","target","id","value","state","userdetails","applications","rating","giveRating","bind","componentDidMount","user","auth","get","then","response","data","catch","error","console","log","jobs","sortedJobs","componentWillReceiveProps","nextProps","errors","rated","application","getjob","jobId","job","filter","item","_id","rate","nrate","numrate","nrating","editJob","editApplication","put","alert","window","location","reload","render","userRole","role","AppliedJobs","applicantId","map","ind","title","status","doj","substring","salary","recruiterName","height","width","propTypes","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport List from '@material-ui/core/List';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItem from '@material-ui/core/ListItem';\nimport Rating from '@material-ui/lab/Rating';\nimport PropTypes from \"prop-types\";\nimport Card from \"react-bootstrap/Card\";\nimport { connect } from \"react-redux\";\n\n\nclass MyApplications extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            userdetails: [],\n            applications: [],\n            rating: 0\n        };\n        this.giveRating = this.giveRating.bind(this);\n        // this.renderIcon = this.renderIcon.bind(this);\n        // this.sortChange = this.sortChange.bind(this);\n    }\n\n    onLogoutClick = e => {\n        e.preventDefault();\n        this.props.logoutUser();\n    };\n\n    giveRating(e) {\n        this.setState({rating: e.target.value});\n    }\n\n    onChange = e => {\n        this.setState({ [e.target.id]: e.target.value });\n    };\n\n    componentDidMount() {\n        const { user } = this.props.auth;\n        axios.get('http://localhost:4000/user/'+ user.id)\n                .then(response => {\n                    this.setState({userdetails: response.data});\n                })\n                .catch(function(error) {\n                    console.log(error);\n                })\n        axios.get('http://localhost:4000/job/get_jobs')\n            .then(response => {\n                this.setState({jobs: response.data, sortedJobs:response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n        axios.get('http://localhost:4000/application/get_applications')\n            .then(response => {\n                this.setState({applications: response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.errors) {\n            this.setState({\n            errors: nextProps.errors\n            });\n        }\n    }\n\n    rated(application) {\n        if(application.rating !== -1)return true;\n        return false;\n    }\n\n    getjob(jobId)\n    {\n        let job = this.state.jobs.filter(item => item._id === jobId)[0];\n        return job;\n    }\n\n    rate(application)\n    {\n        let job = this.getjob(application.jobId);\n        let nrate = job.numrate;\n        nrate = nrate + 1;\n        let nrating = 0;\n        if(job.rating === -1)\n        {\n            nrating = this.state.rating\n        }\n        else\n        {\n            nrating = ((+job.rating * (+nrate-1)) + +this.state.rating) / (+nrate);\n        }\n\n        const editJob = {\n            rating: nrating,\n            numrate: nrate\n        };\n\n        const editApplication = {\n            rating: this.state.rating\n        };\n\n        axios\n            .put('http://localhost:4000/job/edit_job/' + job._id, editJob)\n            .then(response => {\n                console.log(editJob);\n                alert(\"Job rated successfully!\");\n            })\n            .catch(function(error) {\n                console.log(error);\n                alert(\"Job could not be rated.\");\n            })\n\n        axios\n            .put('http://localhost:4000/application/edit_application/' + application._id, editApplication)\n            .then(response => {\n                console.log(editApplication);\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n\n        window.location.reload();\n    \n    }\n\n    render() \n    {\n        const { user } = this.props.auth;\n        const userRole = this.state.userdetails.role;\n        let AppliedJobs;\n        if(userRole === \"applicant\") {\n            AppliedJobs =\n            <div>\n                <Grid container>\n                <Grid item xs={12} md={3} lg={3}>\n                    <List component=\"nav\" aria-label=\"mailbox folders\">\n                        <ListItem text>\n                            <h3>My Applications</h3>\n                        </ListItem>\n                    </List>\n                </Grid>\n                </Grid>\n                <Grid container>\n                    <Grid item xs={12} md={12} lg={12}>\n                        <Paper>\n                            <Table>\n                                <TableHead>\n                                    <TableRow>\n                                            <TableCell>Title</TableCell>\n                                            <TableCell>Status</TableCell>\n                                            <TableCell>Date of Joining</TableCell>\n                                            <TableCell>Salary (per month)</TableCell>\n                                            <TableCell>Recruiter</TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.applications.filter(item => item.applicantId === user.id).map((application,ind) => (\n                                        <TableRow key={ind}>\n                                            <TableCell>{application.title}</TableCell>\n                                            <TableCell>{application.status}</TableCell>\n                                            <TableCell>{application.doj? application.doj.substring(0,10) : \"\"}</TableCell>\n                                            <TableCell>{application.salary}</TableCell>\n                                            <TableCell>{application.recruiterName}</TableCell>\n                                           \n                                            {!this.rated(application) && application.status === \"Accepted\"?\n                                            \n                                            <TableCell>\n                                                <Rating\n                                                    value={this.state.rating}\n                                                    onChange={this.giveRating}\n                                                />\n                                                <Tooltip title=\"Rate this job\" aria-label=\"apply\">\n                                                    <button\n                                                        className=\"btn btn-primary btn-sm waves-effect waves-light hoverable blue accent-3\" \n                                                        onClick={() => this.rate(application)}>\n                                                        Rate\n                                                    </button> \n                                                </Tooltip>                                            \n                                            </TableCell>\n\n                                            :\n\n                                            <TableCell>\n                                                <div>{application.rating !== -1? \"Rated\" : \"\"}</div>                                           \n                                            </TableCell>\n\n                                            }\n                                            \n                                        </TableRow>\n                                    ))}\n                                </TableBody>\n                            </Table>\n                        </Paper>               \n                    </Grid>    \n                </Grid>            \n            </div>\n        }\n        return (\n            <div style={{ height: \"75vh\" }} className=\"valign-wrapper\">\n                <div className=\"row\">\n                    <div className=\"col s12 center-align\">\n                        <Card style={{ width: '100%' }}>\n                            <Card.Body>\n                                <Card.Text>\n                                    {AppliedJobs}\n                                </Card.Text>\n                            </Card.Body>\n                        </Card>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nMyApplications.propTypes = {\n    auth: PropTypes.object.isRequired,\n    errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n    auth: state.auth,\n    errors: state.errors\n});\nexport default connect(\n    mapStateToProps,\n)(MyApplications);"]},"metadata":{},"sourceType":"module"}