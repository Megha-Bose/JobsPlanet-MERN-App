{"ast":null,"code":"var _jsxFileName = \"/home/megha/mernapp/frontend/src/components/Recruiter/Employees.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Rating from '@material-ui/lab/Rating';\nimport List from '@material-ui/core/List';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PropTypes from \"prop-types\";\nimport Card from \"react-bootstrap/Card\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\nclass Employees extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n    };\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.state = {\n      userdetails: [],\n      users: [],\n      jobs: [],\n      applications: [],\n      rating: 0,\n      sortbyname: true,\n      sortbytitle: true,\n      sortbyrating: true,\n      sortbydateofjoin: true\n    };\n    this.giveRating = this.giveRating.bind(this);\n    this.renderNameIcon = this.renderNameIcon.bind(this);\n    this.sortByName = this.sortByName.bind(this);\n    this.renderTitleIcon = this.renderTitleIcon.bind(this);\n    this.sortByTitle = this.sortByTitle.bind(this);\n    this.renderRatingIcon = this.renderRatingIcon.bind(this);\n    this.sortByRating = this.sortByRating.bind(this);\n    this.sortByDateOfJoin = this.sortByDateOfJoin.bind(this);\n    this.renderDateOfJoinIcon = this.renderDateOfJoinIcon.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      user\n    } = this.props.auth;\n    axios.get('http://localhost:4000/user/' + user.id).then(response => {\n      this.setState({\n        userdetails: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/job/get_jobs').then(response => {\n      this.setState({\n        jobs: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/user/').then(response => {\n      this.setState({\n        users: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n    axios.get('http://localhost:4000/application/get_applications').then(response => {\n      this.setState({\n        applications: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.errors) {\n      this.setState({\n        errors: nextProps.errors\n      });\n    }\n  }\n\n  rated(application) {\n    if (application.applicantRating !== -1) return true;\n    return false;\n  }\n\n  giveRating(e) {\n    console.log(e.target.value);\n    this.setState({\n      rating: e.target.value\n    });\n  }\n\n  getjob(jobId) {\n    let job = this.state.jobs.filter(item => item._id === jobId)[0];\n    return job;\n  }\n\n  getapplicant(applicantId) {\n    let applicant = this.state.users.filter(item => item._id === applicantId)[0];\n    console.log(applicant);\n    return applicant;\n  }\n\n  sortByRating() {\n    var array = this.state.applications;\n    var flag = this.state.sortbyrating;\n    let uusers = this.state.users;\n\n    function getapplicant(applicantId) {\n      let applicant = uusers.filter(item => item._id === applicantId)[0];\n      return applicant;\n    }\n\n    array.sort(function (a, b) {\n      let aapp = getapplicant(a.applicantId);\n      let bapp = getapplicant(b.applicantId);\n\n      if (aapp.rating !== undefined && bapp.rating !== undefined) {\n        return (1 - +flag * 2) * (+aapp.rating - +bapp.rating);\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      applications: array,\n      sortbyrating: !this.state.sortbyrating\n    });\n  }\n\n  renderRatingIcon() {\n    if (this.state.sortbyrating) {\n      return React.createElement(ArrowDownwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(ArrowUpwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      });\n    }\n  }\n\n  sortByName() {\n    var array = this.state.applications;\n    var flag = this.state.sortbyname;\n    let uusers = this.state.users;\n\n    function getapplicant(applicantId) {\n      let applicant = uusers.filter(item => item._id === applicantId)[0];\n      return applicant;\n    }\n\n    array.sort(function (a, b) {\n      console.log(a.applicantId);\n      let aapp = getapplicant(a.applicantId);\n      let bapp = getapplicant(b.applicantId);\n\n      if (aapp.name !== undefined && bapp.name !== undefined) {\n        return (1 - +flag * 2) * aapp.name.localeCompare(bapp.name);\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      applications: array,\n      sortbyname: !this.state.sortbyname\n    });\n  }\n\n  renderNameIcon() {\n    if (this.state.sortbyname) {\n      return React.createElement(ArrowDownwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(ArrowUpwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      });\n    }\n  }\n\n  sortByTitle() {\n    var array = this.state.applications;\n    var flag = this.state.sortbytitle;\n    let jjobs = this.state.jobs;\n\n    function getjob(jobId) {\n      let job = jjobs.filter(item => item._id === jobId)[0];\n      return job;\n    }\n\n    array.sort(function (a, b) {\n      let aapp = getjob(a.jobId);\n      let bapp = getjob(b.jobId);\n\n      if (aapp.title !== undefined && bapp.title !== undefined) {\n        return (1 - +flag * 2) * aapp.title.localeCompare(bapp.title);\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      applications: array,\n      sortbytitle: !this.state.sortbytitle\n    });\n  }\n\n  renderTitleIcon() {\n    if (this.state.sortbytitle) {\n      return React.createElement(ArrowDownwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(ArrowUpwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      });\n    }\n  }\n\n  sortByDateOfJoin() {\n    var array = this.state.applications;\n    var flag = this.state.sortbydateofjoin;\n    array.sort(function (a, b) {\n      if (a.dateOfJoin !== undefined && b.dateOfJoin !== undefined) {\n        return (1 - +flag * 2) * (new Date(a.dateOfJoin) - new Date(b.dateOfJoin));\n      } else {\n        return 1;\n      }\n    });\n    this.setState({\n      applications: array,\n      sortbydateofjoin: !this.state.sortbydateofjoin\n    });\n  }\n\n  renderDateOfJoinIcon() {\n    if (this.state.sortbydateofjoin) {\n      return React.createElement(ArrowDownwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(ArrowUpwardIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      });\n    }\n  }\n\n  rate(application) {\n    const {\n      user\n    } = this.props.auth;\n    let applicant = this.getapplicant(application.applicantId);\n    console.log(applicant._id);\n    let nrate = applicant.numrate;\n    nrate = nrate + 1;\n    let nrating = 0;\n\n    if (applicant.rating == -1) {\n      nrating = +this.state.rating;\n    } else {\n      nrating = (+applicant.rating * (+nrate - 1) + +this.state.rating) / +nrate;\n    }\n\n    const editApplicant = {\n      rating: nrating,\n      numrate: nrate\n    };\n    const editApplication = {\n      applicantRating: nrating\n    };\n    axios.put('http://localhost:4000/user/edit_profile/' + applicant._id, editApplicant).then(response => {\n      console.log(editApplicant);\n      alert(\"Applicant rated successfully!\");\n    }).catch(function (error) {\n      console.log(error);\n      alert(\"Applicant could not be rated.\");\n    });\n    axios.put('http://localhost:4000/application/edit_application/' + application._id, editApplication).then(response => {\n      console.log(editApplication);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    window.location.reload();\n  }\n\n  render() {\n    const {\n      user\n    } = this.props.auth;\n    const userRole = this.state.userdetails.role;\n    let Myemployees;\n\n    if (userRole === \"recruiter\") {\n      Myemployees = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 3,\n        lg: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(List, {\n        component: \"nav\",\n        \"aria-label\": \"mailbox folders\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(ListItem, {\n        text: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, \"Employees\"))))), React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        md: 12,\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, \"Name \", React.createElement(Button, {\n        onClick: this.sortByName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, this.renderNameIcon())), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, \"Employee Rating \", React.createElement(Button, {\n        onClick: this.sortByRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, this.renderRatingIcon())), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, \"Job Title \", React.createElement(Button, {\n        onClick: this.sortByTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, this.renderTitleIcon())), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Job Type\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"DOJ \", React.createElement(Button, {\n        onClick: this.sortByDateOfJoin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, this.renderDateOfJoinIcon())))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, this.state.applications.filter(item => item.status === \"Accepted\" && item.recruiterId == user.id).map((application, ind) => React.createElement(TableRow, {\n        key: ind,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, this.state.users.filter(item => item._id === application.applicantId).map((applicant, innd) => React.createElement(TableCell, {\n        key: innd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, applicant.name)), this.state.users.filter(item => item._id === application.applicantId).map((applicant, innd) => React.createElement(TableCell, {\n        key: innd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, applicant.rating ? applicant.rating.toFixed(1) : \"\", React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, \" star\")))), this.state.jobs.filter(item => item._id === application.jobId).map((job, innnd) => React.createElement(TableCell, {\n        key: innnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, job.title)), this.state.jobs.filter(item => item._id === application.jobId).map((job, innnd) => React.createElement(TableCell, {\n        key: innnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, job.type)), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, application.doj ? application.doj.substring(0, 10) : \"\"), !this.rated(application) ? React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(Rating, {\n        value: this.state.rating,\n        onChange: this.giveRating,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }), React.createElement(Tooltip, {\n        title: \"Rate this employee\",\n        \"aria-label\": \"rate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm waves-effect waves-light hoverable blue accent-3\",\n        onClick: () => this.rate(application),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"Rate Employee\"))) : React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Rated\"))))))))));\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        height: \"75vh\"\n      },\n      className: \"valign-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 center-align\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417\n      },\n      __self: this\n    }, React.createElement(Card, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }, Myemployees))))));\n  }\n\n}\n\nEmployees.propTypes = {\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(Employees);","map":{"version":3,"sources":["/home/megha/mernapp/frontend/src/components/Recruiter/Employees.js"],"names":["React","Component","axios","Paper","Grid","TableCell","TableHead","TableRow","Table","TableBody","Button","TextField","Rating","List","Tooltip","ListItem","Divider","Autocomplete","IconButton","InputAdornment","SearchIcon","ArrowUpwardIcon","ArrowDownwardIcon","PropTypes","Card","connect","logoutUser","ButtonGroup","Dropdown","Employees","constructor","props","onLogoutClick","e","preventDefault","onChange","setState","target","id","value","state","userdetails","users","jobs","applications","rating","sortbyname","sortbytitle","sortbyrating","sortbydateofjoin","giveRating","bind","renderNameIcon","sortByName","renderTitleIcon","sortByTitle","renderRatingIcon","sortByRating","sortByDateOfJoin","renderDateOfJoinIcon","componentDidMount","user","auth","get","then","response","data","catch","error","console","log","componentWillReceiveProps","nextProps","errors","rated","application","applicantRating","getjob","jobId","job","filter","item","_id","getapplicant","applicantId","applicant","array","flag","uusers","sort","a","b","aapp","bapp","undefined","name","localeCompare","jjobs","title","dateOfJoin","Date","rate","nrate","numrate","nrating","editApplicant","editApplication","put","alert","window","location","reload","render","userRole","role","Myemployees","status","recruiterId","map","ind","innd","toFixed","innnd","type","doj","substring","height","width","propTypes","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Rating from '@material-ui/lab/Rating';\nimport List from '@material-ui/core/List';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\n\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\n\nimport PropTypes from \"prop-types\";\nimport Card from \"react-bootstrap/Card\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Dropdown from 'react-bootstrap/Dropdown';\n\n\n\nclass Employees extends Component {\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            userdetails: [],\n            users: [],\n            jobs: [],\n            applications: [],\n            rating: 0,\n            sortbyname:true,\n            sortbytitle:true,\n            sortbyrating:true,\n            sortbydateofjoin: true\n        };\n        this.giveRating = this.giveRating.bind(this);\n        this.renderNameIcon = this.renderNameIcon.bind(this);\n        this.sortByName = this.sortByName.bind(this);\n        this.renderTitleIcon = this.renderTitleIcon.bind(this);\n        this.sortByTitle = this.sortByTitle.bind(this);\n        this.renderRatingIcon = this.renderRatingIcon.bind(this);\n        this.sortByRating = this.sortByRating.bind(this);\n        this.sortByDateOfJoin = this.sortByDateOfJoin.bind(this);\n        this.renderDateOfJoinIcon = this.renderDateOfJoinIcon.bind(this);\n    }\n\n    onLogoutClick = e => {\n        e.preventDefault();\n        this.props.logoutUser();\n    };\n\n    componentDidMount() {\n        const { user } = this.props.auth;\n        axios.get('http://localhost:4000/user/'+ user.id)\n            .then(response => {\n                this.setState({userdetails: response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n        axios.get('http://localhost:4000/job/get_jobs')\n            .then(response => {\n                this.setState({jobs: response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n        axios.get('http://localhost:4000/user/')\n            .then(response => {\n                this.setState({users: response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n        axios.get('http://localhost:4000/application/get_applications')\n            .then(response => {\n                this.setState({applications: response.data});\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.errors) {\n            this.setState({\n            errors: nextProps.errors\n            });\n        }\n    }\n\n    onChange = e => {\n        this.setState({ [e.target.id]: e.target.value });\n    };\n\n    rated(application) {\n        if(application.applicantRating !== -1) return true;\n        return false;\n    }\n\n    giveRating(e) {\n        console.log(e.target.value);\n        this.setState({rating: e.target.value});\n    }\n\n    getjob(jobId)\n    {\n        let job = this.state.jobs.filter(item => item._id === jobId)[0];\n        return job;\n    }\n\n    getapplicant(applicantId)\n    {\n        let applicant = this.state.users.filter(item => item._id === applicantId)[0];\n        console.log(applicant);\n        return applicant;\n    }\n\n    sortByRating(){\n        var array = this.state.applications;\n        var flag = this.state.sortbyrating;\n        let uusers = this.state.users;\n        function getapplicant(applicantId)\n        {\n            let applicant = uusers.filter(item => item._id === applicantId)[0];\n            return applicant;\n        }\n        array.sort(function(a, b) {\n            let aapp = getapplicant(a.applicantId);\n            let bapp = getapplicant(b.applicantId);\n            if(aapp.rating !== undefined && bapp.rating !== undefined){\n                return (1 - +flag*2) * (+aapp.rating - +bapp.rating);\n            }\n            else{\n                return 1;\n            }\n          });\n        this.setState({\n            applications:array,\n            sortbyrating:!this.state.sortbyrating,\n        })\n    }\n\n    renderRatingIcon(){\n        if(this.state.sortbyrating){\n            return(\n                <ArrowDownwardIcon/>\n            )\n        }\n        else{\n            return(\n                <ArrowUpwardIcon/>\n            )            \n        }\n    }\n\n    sortByName(){\n        var array = this.state.applications;\n        var flag = this.state.sortbyname;\n        let uusers = this.state.users;\n        function getapplicant(applicantId)\n        {\n            let applicant = uusers.filter(item => item._id === applicantId)[0];\n            return applicant;\n        }\n        array.sort(function(a, b) {\n            console.log(a.applicantId);\n            let aapp = getapplicant(a.applicantId);\n            let bapp = getapplicant(b.applicantId);\n            if(aapp.name !== undefined && bapp.name !== undefined){\n                return (1 - +flag*2) * aapp.name.localeCompare(bapp.name);\n            }\n            else{\n                return 1;\n            }\n          });\n        this.setState({\n            applications:array,\n            sortbyname:!this.state.sortbyname,\n        })\n    }\n\n    renderNameIcon(){\n        if(this.state.sortbyname){\n            return(\n                <ArrowDownwardIcon/>\n            )\n        }\n        else{\n            return(\n                <ArrowUpwardIcon/>\n            )            \n        }\n    }\n\n    sortByTitle(){\n        var array = this.state.applications;\n        var flag = this.state.sortbytitle;\n        let jjobs = this.state.jobs;\n        function getjob(jobId)\n        {\n            let job = jjobs.filter(item => item._id === jobId)[0];\n            return job;\n        }\n        array.sort(function(a, b) {\n            let aapp = getjob(a.jobId);\n            let bapp = getjob(b.jobId);\n            if(aapp.title !== undefined && bapp.title !== undefined){\n                return (1 - +flag*2) * aapp.title.localeCompare(bapp.title);\n            }\n            else{\n                return 1;\n            }\n          });\n        this.setState({\n            applications:array,\n            sortbytitle:!this.state.sortbytitle,\n        })\n    }\n\n    renderTitleIcon(){\n        if(this.state.sortbytitle){\n            return(\n                <ArrowDownwardIcon/>\n            )\n        }\n        else{\n            return(\n                <ArrowUpwardIcon/>\n            )            \n        }\n    }\n\n    sortByDateOfJoin(){\n        var array = this.state.applications;\n        var flag = this.state.sortbydateofjoin;\n        array.sort(function(a, b) {\n            if(a.dateOfJoin !== undefined && b.dateOfJoin !== undefined){\n                return (1 - +flag*2) * (new Date(a.dateOfJoin) - new Date(b.dateOfJoin));\n            }\n            else{\n                return 1;\n            }\n          });\n        this.setState({\n            applications:array,\n            sortbydateofjoin:!this.state.sortbydateofjoin,\n        })\n    }\n\n    renderDateOfJoinIcon(){\n        if(this.state.sortbydateofjoin){\n            return(\n                <ArrowDownwardIcon/>\n            )\n        }\n        else{\n            return(\n                <ArrowUpwardIcon/>\n            )            \n        }\n    }\n\n    rate(application)\n    {\n        const { user } = this.props.auth;\n        let applicant = this.getapplicant(application.applicantId);\n        console.log(applicant._id);\n        let nrate = applicant.numrate;\n        nrate = nrate + 1;\n        let nrating = 0;\n        if(applicant.rating == -1)\n        {\n            nrating = +this.state.rating;\n        }\n        else\n        {\n            nrating = ((+applicant.rating * (+nrate-1)) + +this.state.rating) / (+nrate);\n        }\n\n        const editApplicant = {\n            rating: nrating,\n            numrate: nrate\n        };\n\n        const editApplication = {\n            applicantRating: nrating\n        };\n\n        axios\n            .put('http://localhost:4000/user/edit_profile/' + applicant._id, editApplicant)\n            .then(response => {\n                console.log(editApplicant);\n                alert(\"Applicant rated successfully!\");\n            })\n            .catch(function(error) {\n                console.log(error);\n                alert(\"Applicant could not be rated.\");\n            })\n\n        axios\n            .put('http://localhost:4000/application/edit_application/' + application._id, editApplication)\n            .then(response => {\n                console.log(editApplication);\n            })\n            .catch(function(error) {\n                console.log(error);\n            })\n\n        window.location.reload();\n    \n    }\n\n    render() \n    {\n        const { user } = this.props.auth;\n        const userRole = this.state.userdetails.role;\n        let Myemployees;\n        if(userRole === \"recruiter\") {\n            Myemployees =\n            <div>\n                <Grid container>\n                <Grid item xs={12} md={3} lg={3}>\n                    <List component=\"nav\" aria-label=\"mailbox folders\">\n                        <ListItem text>\n                            <h3>Employees</h3>\n                        </ListItem>\n                    </List>\n                </Grid>\n                </Grid>\n                <Grid container>\n                    <Grid item xs={12} md={12} lg={12}>\n                        <Paper>\n                            <Table>\n                                <TableHead>\n                                    <TableRow>\n                                        <TableCell>Name <Button onClick={this.sortByName}>{this.renderNameIcon()}</Button></TableCell>\n                                        <TableCell>Employee Rating <Button onClick={this.sortByRating}>{this.renderRatingIcon()}</Button></TableCell>\n                                        <TableCell>Job Title <Button onClick={this.sortByTitle}>{this.renderTitleIcon()}</Button></TableCell>\n                                        <TableCell>Job Type</TableCell>\n                                        <TableCell>DOJ <Button onClick={this.sortByDateOfJoin}>{this.renderDateOfJoinIcon()}</Button></TableCell>\n                                    </TableRow>\n                                </TableHead>\n                                <TableBody>\n                                    {this.state.applications.filter(item => item.status === \"Accepted\" && item.recruiterId == user.id).map((application,ind) => (\n                                        <TableRow key={ind}>\n                                            \n                                            {this.state.users.filter(item => item._id === application.applicantId).map((applicant,innd) => (\n                                                <TableCell key={innd}>{applicant.name}</TableCell>\n                                            ))}\n\n                                            {this.state.users.filter(item => item._id === application.applicantId).map((applicant,innd) => (\n                                                <TableCell key={innd}>{applicant.rating ? applicant.rating.toFixed(1): \"\"}<i className=\"material-icons\"><h6> star</h6></i></TableCell>\n                                            ))}\n                                            \n                                            {this.state.jobs.filter(item => item._id === application.jobId).map((job,innnd) => (\n                                                <TableCell key={innnd}>\n                                                    {job.title}\n                                                </TableCell>\n                                            ))}\n\n                                            {this.state.jobs.filter(item => item._id === application.jobId).map((job,innnd) => (\n                                                <TableCell key={innnd}>\n                                                    {job.type}\n                                                </TableCell>\n                                            ))}\n                                            <TableCell>{application.doj?application.doj.substring(0, 10):\"\"}</TableCell>\n                                            {!this.rated(application)?\n                                            \n                                            <TableCell>\n                                                <Rating\n                                                    value={this.state.rating}\n                                                    onChange={this.giveRating}\n                                                />\n                                                <Tooltip title=\"Rate this employee\" aria-label=\"rate\">\n                                                    <button\n                                                        className=\"btn btn-primary btn-sm waves-effect waves-light hoverable blue accent-3\" \n                                                        onClick={() => this.rate(application)}>\n                                                        Rate Employee\n                                                    </button> \n                                                </Tooltip>                                            \n                                            </TableCell>\n\n                                            :\n\n                                            <TableCell>\n                                                <div>Rated</div>                                           \n                                            </TableCell>\n\n                                            }\n                                        </TableRow>\n                                    ))}\n                                </TableBody>\n                            </Table>\n                        </Paper>               \n                    </Grid>    \n                </Grid>            \n            </div>\n        }\n        return (\n            <div style={{ height: \"75vh\" }} className=\"valign-wrapper\">\n                <div className=\"row\">\n                    <div className=\"col s12 center-align\">\n                        <Card style={{ width: '100%' }}>\n                            <Card.Body>\n                                <Card.Text>\n                                    {Myemployees}\n                                </Card.Text>\n                            </Card.Body>\n                        </Card>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nEmployees.propTypes = {\n    auth: PropTypes.object.isRequired,\n    errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n    auth: state.auth,\n    errors: state.errors\n});\nexport default connect(\n    mapStateToProps,\n)(Employees);"]},"metadata":{},"sourceType":"module"}